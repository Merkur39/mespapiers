(window.webpackJsonp=window.webpackJsonp||[]).push([[6,7],{"9Yiz":function(e,t,n){"use strict";n.r(t);var r=n("lSNA"),a=n.n(r),u=n("J4zp"),c=n.n(u),o=n("q1tI"),i=n.n(o),l=n("17x9"),s=n.n(l),p=n("ERmx"),f=n("buk/"),b=n("Vggm"),d=n.n(b);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e,t){return e>0&&t.length<=e||0===e},y=function(e){var t=e.attrs,n=e.setValue,r=e.setValidInput,u=e.idx,l=t.name,s=t.inputLabel,b=t.metadata,g=t.type,y=Object(f.f)().t,h=Object(o.useState)(b[l]||""),O=c()(h,2),j=O[0],w=O[1],x=Object(o.useState)(!1),P=c()(x,2),k=P[0],E=P[1];Object(o.useEffect)((function(){n((function(e){return v(v({},e),{},a()({},l,j))}))}),[l,n,j]),Object(o.useEffect)((function(){r((function(e){return v(v({},e),{},a()({},u,0===j.length||j.length===I))}))}),[u,I,r,j.length]);var T=Object(o.useMemo)((function(){return function(e){var t=e.split(":"),n=c()(t,2),r=n[0],a=void 0===r?e:r,u=n[1],o={inputType:"",inputMaxLength:0};switch(a){case"Number":o.inputType="Number".toLowerCase();break;case"Text":o.inputType="Text".toLowerCase();break;default:d()("warn",'"type" in "attributes" property is not defined or unexpected, "type" set to "text" by default'),o.inputType="Text".toLowerCase()}return u&&(o.inputMaxLength=parseInt(u,10)),o}(g)}),[g]),D=T.inputType,I=T.inputMaxLength,S=Object(o.useCallback)((function(e){var t=e.target.value;if("number"===D){var n=parseInt(t,10);/^[0-9]*$/.test(n)?m(I,t)&&w(n.toString()):""===t&&w(t)}else m(I,t)&&w(t)}),[I,D]),V=k?y("InputTextAdapter.invalidTextMessage",{smart_count:I-j.length}):"";return i.a.createElement(p.a,{value:j,className:"u-h-2",error:k,onBlur:function(){j.length>0?E(I>0&&j.length<I):E(!1)},onFocus:function(){return E(!1)},helperText:V,inputProps:{inputMode:"number"===D?"numeric":"text"},onChange:S,variant:"outlined",label:s?y(s):"",fullWidth:!0,autoFocus:!0})},h=s.a.shape({name:s.a.string,inputLabel:s.a.string,metadata:s.a.shape(a()({},"attrsProptypes.name",s.a.string)),type:s.a.string});y.propTypes={attrs:h.isRequired,setValue:s.a.func.isRequired,setValidInput:s.a.func.isRequired,idx:s.a.number};t.default=y},C2q6:function(e,t,n){"use strict";n.r(t);var r=n("lSNA"),a=n.n(r),u=n("q1tI"),c=n.n(u),o=n("/yuz"),i=n("55Ip"),l=n("SH7X"),s=n("buk/"),p=n("1I/2"),f=n("dHS8"),b=n("d7tf"),d=n("owhZ"),g=n("7dT6");jest.mock("cozy-scanner/dist/locales",(function(){return{getBoundT:jest.fn((function(){return jest.fn()}))}})),jest.mock("cozy-scanner/dist/DocumentTypeData",(function(){return{themes:[{}]}}));var v=function(e){var t=e.children,n=e.client;return c.a.createElement(l.CozyProvider,{client:n||Object(l.createMockClient)({})},c.a.createElement(s.d,{dictRequire:function(){return g},lang:"en"},c.a.createElement(d.a,{lang:"en"},c.a.createElement(p.a,null,c.a.createElement(f.a,null,c.a.createElement(b.a,null,c.a.createElement(i.a,null,t)))))))},m=n("9Yiz");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}jest.mock("cozy-scanner/dist/locales",(function(){return{getBoundT:jest.fn((function(){return jest.fn()}))}}));var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fakeValue";return{name:"name01",inputLabel:"PaperJSON.IDCard.number.inputLabel",metadata:{name01:t},type:e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O(),t=e.metadata.name01,n=Object(o.b)(c.a.createElement(v,null,c.a.createElement(m.default,{attrs:e,setValue:jest.fn(),setValidInput:jest.fn()}))),r=n.getByDisplayValue(t);return h({input:r},n)};describe("InputTextAdapter components:",(function(){it("should be rendered correctly",(function(){var e=j().container;expect(e).toBeDefined()})),it("should have a value of 5 letters",(function(){var e=j(O(":5")).input;o.a.change(e,{target:{value:"abcde"}}),expect(e.value).toBe("abcde")})),it('should have a value of "fakeValue"',(function(){var e=j(O(":5")).input;o.a.change(e,{target:{value:"abcdefgh"}}),expect(e.value).toBe("fakeValue"),o.a.change(e,{target:{value:"123456789"}}),expect(e.value).toBe("fakeValue")})),it("should have a value of 5 digits",(function(){var e=j(O("Number:5","789")).input;o.a.change(e,{target:{value:"12345"}}),expect(e.value).toBe("12345")}))}))}}]);