(window.webpackJsonp=window.webpackJsonp||[]).push([[6,7],{"9Yiz":function(e,t,n){"use strict";n.r(t);var r=n("lSNA"),a=n.n(r),u=n("J4zp"),c=n.n(u),o=n("q1tI"),i=n.n(o),l=n("17x9"),s=n.n(l),p=n("ERmx"),f=n("buk/"),b=n("Vggm"),d=n.n(b);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e,t){return e>0&&t.length<=e||0===e},h=function(e){var t=e.attrs,n=e.setValue,r=e.setValidInput,u=e.setIsFocus,l=e.idx,s=t.name,b=t.inputLabel,g=t.metadata,h=t.type,m=Object(f.f)().t,O=Object(o.useState)(g[s]||""),j=c()(O,2),w=j[0],x=j[1],P=Object(o.useState)(!1),E=c()(P,2),k=E[0],T=E[1];Object(o.useEffect)((function(){n((function(e){return v(v({},e),{},a()({},s,w))}))}),[s,n,w]),Object(o.useEffect)((function(){r((function(e){return v(v({},e),{},a()({},l,0===w.length||w.length===S))}))}),[l,S,r,w.length]);var D=Object(o.useMemo)((function(){return function(e){var t=e.split(":"),n=c()(t,2),r=n[0],a=void 0===r?e:r,u=n[1],o={inputType:"",inputMaxLength:0};switch(a){case"Number":o.inputType="Number".toLowerCase();break;case"Text":o.inputType="Text".toLowerCase();break;default:d()("warn",'"type" in "attributes" property is not defined or unexpected, "type" set to "text" by default'),o.inputType="Text".toLowerCase()}return u&&(o.inputMaxLength=parseInt(u,10)),o}(h)}),[h]),I=D.inputType,S=D.inputMaxLength,V=Object(o.useCallback)((function(e){var t=e.target.value;if("number"===I){var n=parseInt(t,10);/^[0-9]*$/.test(n)?y(S,t)&&x(n.toString()):""===t&&x(t)}else y(S,t)&&x(t)}),[S,I]),L=k?m("InputTextAdapter.invalidTextMessage",{smart_count:S-w.length}):"";return i.a.createElement(p.a,{value:w,error:k,onBlur:function(){u(!1),w.length>0?T(S>0&&w.length<S):T(!1)},onFocus:function(){u(!0),T(!1)},helperText:L,inputProps:{inputMode:"number"===I?"numeric":"text"},onChange:V,variant:"outlined",label:b?m(b):"",fullWidth:!0})},m=s.a.shape({name:s.a.string,inputLabel:s.a.string,metadata:s.a.shape(a()({},"attrsProptypes.name",s.a.string)),type:s.a.string});h.propTypes={attrs:m.isRequired,setValue:s.a.func.isRequired,setValidInput:s.a.func.isRequired,idx:s.a.number};t.default=h},C2q6:function(e,t,n){"use strict";n.r(t);var r=n("lSNA"),a=n.n(r),u=n("q1tI"),c=n.n(u),o=n("/yuz"),i=n("55Ip"),l=n("LhCv"),s=n("SH7X"),p=n("buk/"),f=n("1I/2"),b=n("dHS8"),d=n("d7tf"),g=n("cqqa"),v=n("owhZ"),y=n("7dT6");jest.mock("cozy-scanner/dist/locales",(function(){return{getBoundT:jest.fn((function(){return jest.fn()}))}})),jest.mock("cozy-scanner/dist/DocumentTypeData",(function(){return{themes:[{}]}}));var h=function(e){var t=e.children,n=e.client,r=e.history||Object(l.b)();return c.a.createElement(s.CozyProvider,{client:n||Object(s.createMockClient)({})},c.a.createElement(p.d,{dictRequire:function(){return y},lang:"en"},c.a.createElement(v.a,{lang:"en"},c.a.createElement(f.a,null,c.a.createElement(b.a,null,c.a.createElement(d.a,null,c.a.createElement(g.a,null,c.a.createElement(i.a,{history:r},t))))))))},m=n("9Yiz");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}jest.mock("cozy-scanner/dist/locales",(function(){return{getBoundT:jest.fn((function(){return jest.fn()}))}}));var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fakeValue";return{name:"name01",inputLabel:"PaperJSON.IDCard.number.inputLabel",metadata:{name01:t},type:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w(),t=e.metadata.name01,n=Object(o.b)(c.a.createElement(h,null,c.a.createElement(m.default,{attrs:e,setValue:jest.fn(),setValidInput:jest.fn()}))),r=n.getByDisplayValue(t);return j({input:r},n)};describe("InputTextAdapter components:",(function(){it("should be rendered correctly",(function(){var e=x().container;expect(e).toBeDefined()})),it("should have a value of 5 letters",(function(){var e=x(w(":5")).input;o.a.change(e,{target:{value:"abcde"}}),expect(e.value).toBe("abcde")})),it('should have a value of "fakeValue"',(function(){var e=x(w(":5")).input;o.a.change(e,{target:{value:"abcdefgh"}}),expect(e.value).toBe("fakeValue"),o.a.change(e,{target:{value:"123456789"}}),expect(e.value).toBe("fakeValue")})),it("should have a value of 5 digits",(function(){var e=x(w("Number:5","789")).input;o.a.change(e,{target:{value:"12345"}}),expect(e.value).toBe("12345")}))}))}}]);